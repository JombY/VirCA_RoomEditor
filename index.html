<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>VirCA Room Editor</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/index_style.css">


</head>

<body>

    <img src="vircalogo.png" width="300px"><br><br>

   

    <div id="url" centered>
        <label>Select your room file from the following list: </label><br>
        <div class="fl" id="choiceTree"></div>
        <a id="btn-submit" class="btn btn-default f1">Letâ€™s get started!</a>
    </div>

    <div id="settings">
        <div>
            <!--<a id="btn-back" class="btn btn-default">Get back to the selection part</a>-->
        </div>
        <div class="plane">
            <p class="centered"> Select the property you would like to change</p>
            <ul id="treeLEFT">
              <li class="fa" id = "treeROOM">room</li>
              <ul>
                 <li class="fa" id = "treeSETTINGS">Settings</li>
                 <ul>
                    <li id = "treeENVIRONMENT">Environment</li>
                    <li id = "treePOINTER">Pointer</li>
                    <li id = "treeBOUNDAIRES">Boundaires</li>
                    <li id = "treeCAMERA">Camera</li>
                    <li id = "treeBROWSER">Browser</li>
                    <li id = "treePRESENTATION">Presentation</li>
                 </ul>
                 <li id="treeCONTENT">Content</li>
                 <ul id="treeCONTENTNODE">
                 </ul>
              </ul>
            </ul> 

        </div>

        <div class="plane">

            <p class="centered">
                The Selected Property
            </p>
            <div class="settings-zone">
                <!--FIRST-->
                <div id="RN" class="first hidden"> 
                    <label>Room name:</label>
                    <input class="tex" type="text" id="roomName" value=""><br>
                </div>
                <div id="settings">
                    <!--FIRST-->
                    <div id="environment" class="first hidden">
                        <label>Environment:</label><br>
                        <div id="skybox" class="second">
                            <label>Skybox</label>
                            <div class="third">
                                <label> Material Name:</label>
                                <input class="tex" type="text" id="environment_skybox_materialName" value=""><br>
                                <label> Distance:</label>
                                <input class="tex" type="text" id="environment_skybox_distance" value=""><br>
                            </div>
                        </div>
                        <div id="environment_ambientColor" class="second">
                            <label>Ambient Color:</label>
                            <div class="third">
                                <label>r: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_ambientColor_r"><br>
                                <label>g: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_ambientColor_g"><br>
                                <label>b: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_ambientColor_b"><br>
                                <label>a: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_ambientColor_a"><br>
                            </div>
                        </div>
                        <div id="environment_backgroundColor" class="second">
                            <label>Background Color:</label>
                            <div class="third">
                                <label>r: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_backgroundColor_r"><br>
                                <label>g: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_backgroundColor_g"><br>
                                <label>b: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_backgroundColor_b"><br>
                                <label>a: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_backgroundColor_a"><br>
                            </div>
                        </div>
                        <div id="shadow" class="second ">
                            <label>Shader:</label>
                            <select class="tex" id="environment_shader">
                                <option value=""></option>
                                <option value="NONE">NONE</option>
                                <option value="DAVE">DAVE</option>
                                <option value="STENCIL">STENCIL</option>
                                <option value="RTSS">RTSS</option>
                            </select>
                        </div>
                        <div class="second">
                            <label>Compositors</label>
                            <div class="third">
                                <label> Bloom:</label>
                                <select class="tex" id="environment_compositors_bloom">
                                    <option value=""></option>
                                    <option value="true">True</option>
                                    <option value="false">False</option>
                                </select><br>
                                <label> Motion Blur:</label>
                                <select class="tex" id="environment_compositors_motionBlur">
                                    <option value=""></option>
                                    <option value="true">True</option>
                                    <option value="false">False</option>
                                </select>
                            </div>
                        </div>
                        <div id="fog" class="second">
                            <label>Fog:</label>
                            <div class="third">
                                <label>Type:</label>
                                <select class="tex" id="environment_fog_type">
                                    <option value=""></option>
                                    <option value="NONE">NONE</option>
                                    <option value="LINEAR">LINEAR</option>
                                    <option value="EXP">EXP</option>
                                    <option value="EXP2">EXP2</option>
                                </select><br>
                                <label>Color:</label>
                                <div class="fourth">
                                    <label>r: </label>
                                    <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_fog_color_r"><br>
                                    <label>g: </label>
                                    <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_fog_color_g"><br>
                                    <label>b: </label>
                                    <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_fog_color_b"><br>
                                    <label>a: </label>
                                    <input class="nums" type="number" min="0" max="1" step="0.00001" id="environment_fog_color_a"><br>
                                </div><br>
                                <label>Linear Start:</label>
                                <input class="nums" type="number" step="0.001"  id="environment_fog_linearStart" value=""><br>
                                <label>Linear Stop:</label>
                                <input class="nums" type="number" step="0.001"  id="environment_fog_linearStop" value=""><br>
                                <label>Exp Density:</label>
                                <input class="nums" type="number" step="0.001"  id="environment_fog_expDensity" value=""><br>

                            </div>

                        </div>
                    </div>
                    <!--FIRST-->
                    <div class="first hidden" id="pointer">
                        <label>Pointer</label><br>
                        <div id="pointer" class="second">
                            <label>Visibility:</label>
                            <select class="tex" id="pointer_visibility">
                                <option value=""></option>
                                <option value="true">True</option>
                                <option value="false">False</option>
                            </select><br>
                            <label>Crosshairs:</label>
                            <select class="tex" id="pointer_crosshairs">
                                <option value=""></option>
                                <option value="true">True</option>
                                <option value="false">False</option>
                            </select><br>
                            <label>Length:</label>
                            <input class="nums" type="number" step="0.001" id="pointer_length" value="0.0"><br>
                            <label>Offset:</label>
                            <div class="third">
                                <label>x: </label>
                                <input class="nums" type="number" step="0.001" id="camera_pointer_offset_x"><br>
                                <label>y: </label>
                                <input class="nums" type="number" step="0.001" id="camera_pointer_offset_y"><br>
                                <label>z: </label>
                                <input class="nums" type="number" step="0.001" id="camera_pointer_offset_z"><br>
                            </div>
                        </div>

                    </div>
                    <!--FIRST-->
                    <div class="first hidden" id="boundaries">
                        <label>Boundaries</label><br>
                        <div class="second">
                            <label>xLimit:</label>
                            <div class="third">
                                <label>min:</label>
                                <input class="nums" type="number" step="0.001" id="boundaries_xLimit_min"><br>
                                <label>max:</label>
                                <input class="nums" type="number" step="0.001" id="boundaries_xLimit_max"><br>
                            </div>
                            <label>yLimit:</label>
                            <div class="third">
                                <label>min:</label>
                                <input class="nums" type="number" step="0.001" id="boundaries_yLimit_min"><br>
                                <label>max:</label>
                                <input class="nums" type="number" step="0.001" id="boundaries_yLimit_max"><br>
                            </div>
                            <label>zLimit:</label>
                            <div class="third">
                                <label>min:</label>
                                <input class="nums" type="number" step="0.001" id="boundaries_zLimit_min"><br>
                                <label>max:</label>
                                <input class="nums" type="number" step="0.001" id="boundaries_zLimit_max"><br>
                            </div>
                        </div>

                    </div>
                    <!--FIRST-->
                    <div class="first hidden" id="camera">
                        <label>Camera</label><br>
                        <div class="second">
                            <label>Pose:</label>
                            <div class="third">
                                <label>Position:</label>
                                <div class="fourth">
                                    <label>x: </label>
                                    <input class="nums" type="number" step="0.001" step="0.001" id="camera_pose_position_x"><br>
                                    <label>y: </label>
                                    <input class="nums" type="number" step="0.001" id="camera_pose_position_y"><br>
                                    <label>z: </label>
                                    <input class="nums" type="number" step="0.001" id="camera_pose_position_z"><br>
                                </div>

                                <label>Orientation:</label>
                                <div class="fourth">
                                    <label>Camera Orientation:</label>
                                    <select class="tex" id="camera_orientation">
                                        <option value="q">Quaternion</option>
                                        <option value="ang">Angle Axis</option>
                                        <option value="rot">Rotation Matrix</option>
                                        <option value="ypr">Yaw Pitch Roll</option>
                                    </select><br>
                                    <div class="fifth">
                                        <div id="camera_quaternion">
                                            <label>x: </label>
                                            <input class="nums" step="0.001" type="number" id="camera_pose_orientation_qx"><br>
                                            <label>y: </label>
                                            <input class="nums" step="0.001" type="number" id="camera_pose_orientation_qy"><br>
                                            <label>z: </label>
                                            <input class="nums" step="0.001" type="number" id="camera_pose_orientation_qz"><br>
                                            <label>w: </label>
                                            <input class="nums" step="0.001" type="number" id="camera_pose_orientation_qw"><br>
                                        </div>
                                        <div id="camera_angleAxis">
                                            <label>Angle: </label>
                                            <input class="nums" step="0.001" type="number" id="camera_pose_orientation_angle"><br>
                                            <label>Axis: </label>
                                            <div class="fifth">
                                                <label>x: </label>
                                                <input class="nums" step="0.001" type="number" id="camera_pose_orientation_axis_x"><br>
                                                <label>y: </label>
                                                <input class="nums" step="0.001" type="number" id="camera_pose_orientation_axis_y"><br>
                                                <label>z: </label>
                                                <input class="nums" step="0.001" type="number" id="camera_pose_orientation_axis_z"><br>
                                            </div>
                                        </div>
                                        <div id="camera_ypr">
                                            <label>Yaw: </label>
                                            <input class="nums" step="0.001" type="number" id="camera_pose_orientation_yaw"><br>
                                            <label>Pitch: </label>
                                            <input class="nums" step="0.001" type="number" id="camera_pose_orientation_pitch"><br>
                                            <label>Roll: </label>
                                            <input class="nums" step="0.001" type="number" id="camera_pose_orientation_roll"><br>
                                        </div>
                                        <div id="camera_rotMatrix">
                                           <div class="fifth">
                                               <label>xx</label>
                                               <input class="nums" step="0.001" type="number" id="camera_pose_orientation_xx"><br>
                                               <label>xy </label>
                                               <input class="nums" step="0.001" type="number" id="camera_pose_orientation_xy"><br>
                                               <label>xz </label>
                                               <input class="nums" step="0.001" type="number" id="camera_pose_orientation_xz"><br>
                                               <label>yx</label>
                                               <input class="nums" step="0.001" type="number" id="camera_pose_orientation_yx"><br>
                                               <label>yy </label>
                                               <input class="nums" step="0.001" type="number" id="camera_pose_orientation_yy"><br>
                                               <label>yz </label>
                                               <input class="nums" step="0.001" type="number" id="camera_pose_orientation_yz"><br>
                                               <label>zx</label>
                                               <input class="nums" step="0.001" type="number" id="camera_pose_orientation_zx"><br>
                                               <label>zy </label>
                                               <input class="nums" step="0.001" type="number" id="camera_pose_orientation_zy"><br>
                                               <label>zz </label>
                                               <input class="nums" step="0.001" type="number" id="camera_pose_orientation_zz"><br>
                                           </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="second">
                            <label>Clipping:</label>
                            <div class="third">
                                <label>Near:</label>
                                <input class="nums" step="0.001" type="number" id="camera_clipping_near"><br>
                                <label>Far:</label>
                                <input class="nums" step="0.001" type="number" id="camera_clipping_far"><br>
                            </div>
                        </div>
                        <div class="second">
                            <label>Fov:</label>
                            <input class="nums" step="0.001" type="number" id="camera_fov">
                        </div>

                    </div>
                    <!--FIRST-->
                    <div class="first hidden" id="browserStartPage">
                        <label>Browser Start Page</label><br>
                        <div class="second">
                            <label>url:</label>
                            <input type="text" class="tex" id="browserStartPage_url">
                        </div>
                    </div>
                    <!--FIRST-->
                    <div class="first hidden" id="presentation">
                        <label>Presentation</label><br>
                        <div class="second">
                            <label>File name:</label>
                            <input type="text" class="tex" id="presentation_fileName"><br>
                            <label>Enabled:</label>
                            <select class="tex" id="presentation_enabled">
                                <option value=""></option>
                                <option value="true">True</option>
                                <option value="false">False</option>
                            </select><br>
                        </div>
                    </div>
                </div>

                <div class="first hidden" id="content">
                </div>

            </div>

        </div>
    </div>

    

    <!-- jQuery -->
    
    <!-- Bootstrap Core JavaScript -->
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Scrolling Nav JavaScript -->
    <script src="js/settings.js"></script>
    
    <script>

    $(function(){
        window.$ = window.jQuery = require('jQuery');
        var parser = require("./js/roomObjectGenerator.js");
        var settings = require("./js/settings.js");
        var room = {};
        var roomPath = "";
        var glob = require("glob");
        var chooser = MakeTreeStructure();
        $("#settings").removeClass("shown").addClass("hidden");

        $("#inputURL").on("change", function(){
            console.log($("#inputURL").val());
            roomPath = $("#inputURL").val();
             
        });
         $("#btn-submit").click(function(){
                console.log($("input[type='radio'][name='myChoice']:checked").val());

                roomPath = $("input[type='radio'][name='myChoice']:checked").val();
                console.log(room, roomPath);
                if(roomPath != undefined){
                    room = parser(roomPath, settings);

                    $("#url").removeClass("shown").addClass("hidden");
                    $("#settings").removeClass("hidden").addClass("shown");
                }
                else{
                    console.log("Error: No file selected. RoomPath: "+roomPath);
                }
        });
        $('#btn-back').click(function(){
            $("#url").removeClass("hidden").addClass("shown");
            $("#settings").removeClass("shown").addClass("hidden");
            settings = require("./js/settings.js");
            if($('input').attr("type") !="radio")
                $('input').val("");
            chooser = MakeTreeStructure();
            console.log($("input[type='radio'][name='myChoice']:checked").val());
        });

        
    });

    function MakeTreeStructure(){
        console.log("Lefutottam;");

        var glob = require("glob");
        var dirs = getDirectories("C:/Users/Public/Documents/VirCA/");
        console.log(dirs);
        var rooms = [];
        $('#choiceTree').append('<ul id="choiceTreeUL"></ul>');
        for(var i = 0; i < dirs.length; ++i){
            console.log(i);
            rooms[i] = [];
            rooms[i] = glob.sync("C:/Users/Public/Documents/VirCA/"+dirs[i]+"/Media/rooms/**/*.room");
            $('#choiceTreeUL').append('<li>'+dirs[i]+'<ul id="choiceTreeLis'+i+'">');
            for(var j = 0; j < rooms[i].length; ++j){
                $('#choiceTreeLis'+i).append('<li><input type="radio" name="myChoice" value="'+rooms[i][j]+'">'+rooms[i][j].substring(rooms[i][j].lastIndexOf("/")+1)+'</li>');
            }
            $('#choiceTreeUL').append('</ul></li>');
        }
        return rooms;
    }
    

    function getDirectories(srcpath) {
      var fs = require('fs'), path = require('path');
      return fs.readdirSync(srcpath).filter(function(file) {
        return fs.statSync(path.join(srcpath, file)).isDirectory();
      });
    }
    </script>
   </body>

</html>